<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <title>Search with Tag Filter</title>
  <style>
    body { font-family: Arial, sans-serif; padding: 20px; }
    .search-bar { margin-bottom: 20px; }
    .tags { margin-bottom: 20px; }
    .tag { display: inline-block; background: #eee; padding: 5px 10px; margin: 5px; cursor: pointer; border-radius: 5px; }
    .tag.active { background: #007bff; color: white; }
    .item { padding: 10px; border-bottom: 1px solid #ddd; }
    .hidden { display: none; }
  </style>
</head>
<body>

  <input class="search-bar" type="text" id="searchInput" placeholder="Search..." />

  <div class="tags" id="tagContainer">
    <span class="tag" data-tag="ghost">ghost</span>
    <span class="tag" data-tag="zato">zato</span>
    <span class="tag" data-tag="town">town</span>
    <span class="tag" data-tag="settlement">settlement</span>
    <span class="tag" data-tag="anomaly">anomaly</span>
    <span class="tag" data-tag="research">research</span>
    <span class="tag" data-tag="factory">factory</span>
    <span class="tag" data-tag="gulag">gulag</span>
    <span class="tag" data-tag="military">military</span>
    <span class="tag" data-tag="unverified">unverified</span>
    <span class="tag" data-tag="other">other</span>
  </div>

  <div id="results">
    <div class="item" data-tags="zato,ghost,factory,town" data-url="major_data_fold/berezniki2_fold/BEREZNIKI.html">Berezniki-2</div>
    <div class="item" data-tags="town,ghost,gulag">Karamken</div>
    <div class="item" data-tags="town,ghost" data-url="major_data_fold/naukan_fold/NAUKAN.html">Naukan</div>
    <div class="item" data-tags="town,ghost,military" data-url="major_data_fold/port_vladimir/PORT_VLADIMIR.html">Port Vladimir</div>
    <div class="item" data-tags="town,ghost" data-url="major_data_fold/pyramiden_fold/PYRAMIDEN.html">Pyramiden</div>
    <div class="item" data-tags="unverified">Salsk-2</div>
    <div class="item" data-tags="town,ghost,zato,factory">Seversk</div>
    <div class="item" data-tags="town,ghost,zato,research">Snezhinsk</div>
    <div class="item" data-tags="town,ghost,zato,factory">Tryokhgorny</div>
    <div class="item" data-tags="town,ghost">Ushakovskoye</div>
  </div>

  <script>
  const searchInput = document.getElementById('searchInput');
  const tagContainer = document.getElementById('tagContainer');
  const tags = document.querySelectorAll('.tag');
  const items = document.querySelectorAll('.item');

  let activeTags = [];

  function filterItems() {
    const searchText = searchInput.value.toLowerCase();

    items.forEach(item => {
      const text = item.textContent.toLowerCase();
      const itemTags = item.dataset.tags
        .toLowerCase()
        .split(',')
        .map(tag => tag.trim());

      const matchesSearch = text.includes(searchText);
      const matchesTags = activeTags.length === 0 || activeTags.some(tag => itemTags.includes(tag));

      if (matchesSearch && matchesTags) {
        item.classList.remove('hidden');
      } else {
        item.classList.add('hidden');
      }
    });
  }

  searchInput.addEventListener('input', filterItems);

  tagContainer.addEventListener('click', (e) => {
    if (e.target.classList.contains('tag')) {
      e.target.classList.toggle('active');
      const tag = e.target.dataset.tag.toLowerCase();

      if (activeTags.includes(tag)) {
        activeTags = activeTags.filter(t => t !== tag);
      } else {
        activeTags.push(tag);
      }

      filterItems();
    }
  });

items.forEach(item => {
  item.addEventListener('click', () => {
    const url = item.dataset.url;
    if (url) {
      window.location.href = url;
    }
  });
});
</script>


</body>
</html>
